(function(){const apiKey="AIzaSyALVvxMg0O6pUtCrf4x4Zs3AGszFBYLAoc",channelId="UCWvV6Th654v_QWWMneykATQ";const style=document.createElement("style");style.textContent=".ktw-container{font-family:'Segoe UI',sans-serif;background:#fff;padding:32px 0;max-width:1200px;margin:auto}.ktw-container h2{text-align:center;font-size:24px;margin-bottom:24px;color:#111}.ktw-gallery{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;padding:0 16px}.ktw-card{background:#fff;border-radius:10px;overflow:hidden;box-shadow:0 6px 14px rgba(0,0,0,0.1);cursor:pointer;transition:0.3s}.ktw-card:hover{transform:translateY(-4px);box-shadow:0 10px 20px rgba(0,0,0,0.2)}.ktw-thumb{width:100%;aspect-ratio:16/9;overflow:hidden}.ktw-thumb img{width:100%;height:100%;object-fit:cover;display:block}.ktw-card p{padding:10px;font-size:14px;color:#222;font-weight:500}.ktw-modal{display:none;position:fixed;z-index:99999;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.8);justify-content:center;align-items:center;flex-direction:column}.ktw-modal-content{position:relative;width:90%;max-width:700px}.ktw-modal iframe{width:100%;height:400px;border-radius:10px;border:none}.ktw-close{position:absolute;top:-15px;right:-15px;width:36px;height:36px;background:#fff;color:#274d9e;font-size:22px;font-weight:bold;border-radius:50%;text-align:center;line-height:36px;cursor:pointer}.ktw-close:hover{background:#f0f0f0;color:#111}@media(max-width:900px){.ktw-gallery{grid-template-columns:repeat(2,1fr)}}@media(max-width:600px){.ktw-gallery{grid-template-columns:1fr}.ktw-modal iframe{height:250px}}";document.head.appendChild(style);const root=document.getElementById("kanalT-widget-root");if(!root)return;root.innerHTML='<div class="ktw-container"><div class="ktw-gallery" id="ktwGallery"><p style="color:#333; text-align:center;">Yükleniyor...</p></div></div><div class="ktw-modal" id="ktwModal"><div class="ktw-modal-content"><span class="ktw-close" id="ktwCloseBtn">×</span><iframe id="ktwIframe" allowfullscreen></iframe></div></div>';document.getElementById("ktwCloseBtn").onclick=()=>{document.getElementById("ktwModal").style.display="none";document.getElementById("ktwIframe").src=""};async function loadPlaylists(){const gallery=document.getElementById("ktwGallery");gallery.innerHTML="";try{const res=await fetch(`https://www.googleapis.com/youtube/v3/playlists?part=snippet&channelId=${channelId}&maxResults=10&key=${apiKey}`),data=await res.json();if(!data.items||data.items.length===0){gallery.innerHTML='<p style="color:#333; text-align:center;">Oynatma listesi bulunamadı.</p>';return}data.items.forEach(pl=>{const thumb=pl.snippet.thumbnails?.maxres?.url||pl.snippet.thumbnails?.high?.url||pl.snippet.thumbnails?.default?.url,card=document.createElement("div");card.className="ktw-card";card.innerHTML=`<div class="ktw-thumb"><img src="${thumb}" alt="${pl.snippet.title}"></div><p>${pl.snippet.title}</p>`;card.onclick=()=>{document.getElementById("ktwIframe").src=`https://www.youtube.com/embed/videoseries?list=${pl.id}&autoplay=1`;document.getElementById("ktwModal").style.display="flex"};gallery.appendChild(card)})}catch(e){console.error("YouTube API hatası:",e),gallery.innerHTML='<p style="color:#333; text-align:center;">Veri alınamadı. Lütfen daha sonra tekrar deneyin.</p>'}}loadPlaylists();})();
